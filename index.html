<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Estudos Interativo ENEM 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Focus -->
    <!-- Application Structure Plan: A dashboard-style SPA. The structure prioritizes user flow over mirroring the original document's linear table. It starts with a high-level overview (weekly plan and a chart visualizing study load per subject) to orient the user. The core interaction is a drill-down navigation system: users select a major knowledge area (e.g., 'Ci√™ncias da Natureza') from a persistent top navigation bar. This action populates the main content area with subject cards ('Biologia', 'F√≠sica', 'Qu√≠mica'). Clicking a subject card drills down further, displaying a list of its specific topics and playlist links. A 'Voltar' button allows easy navigation back to the subject selection. This hierarchical, task-oriented structure prevents information overload, makes content discovery intuitive on both desktop and mobile, and allows the user to focus on one area at a time, which is more effective for studying. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Weekly study schedule. Goal: Inform. Viz/Method: HTML/Tailwind styled cards in a grid. Interaction: Static visual guide. Justification: Provides an immediate, easy-to-understand reference for the user's weekly routine.
        - Report Info: The number of essential topics per subject. Goal: Compare study load. Viz/Method: Horizontal Bar Chart using Chart.js/Canvas. Interaction: Dynamic tooltips on hover. Justification: Offers a quick, quantitative overview of the study plan's scope, helping the user visually prioritize or plan their time. The horizontal format prevents label clutter.
        - Report Info: All subjects, topics, and video URLs with progress tracking. Goal: Organize, provide access, and track progress. Viz/Method: Interactive navigation with dynamically rendered HTML cards and lists, now with specific video links per topic, checkboxes, and progress bars. Interaction: Multi-level drill-down (Area -> Subject -> Topics/Videos) with stateful checkboxes that update progress bars in real-time. Justification: This is the core interactive element, transforming a long, static table into an engaging and focused exploration and tracking tool. It structures the information logically, reduces cognitive load, and streamlines access to the study material while providing clear feedback on completion. Library/Method: Vanilla JS for DOM manipulation, state handling, and localStorage for persistence.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfaf6;
            color: #4a4a4a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 500px;
            max-height: 60vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 600px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #e58968;
            color: #ffffff;
            font-weight: 700;
        }
        .card {
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .progress-bar {
            background-color: #e0e0e0;
            border-radius: 9999px;
            overflow: hidden;
            height: 8px;
        }
        .progress-bar-fill {
            background-color: #e58968;
            height: 100%;
            transition: width 0.5s ease-in-out;
        }
        .topic-item input:checked + label {
            text-decoration: line-through;
            color: #9ca3af;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="container mx-auto px-4 py-4">
            <h1 class="text-2xl md:text-3xl font-bold text-center text-[#d37b58]">Plano de Estudos Interativo ENEM 2025</h1>
            <p class="text-center text-gray-500 mt-1">Seu guia gratuito e completo para a aprova√ß√£o.</p>
        </div>
        <nav id="main-nav" class="bg-[#f7e9dc] py-2">
            <div class="container mx-auto px-4 flex flex-wrap justify-center gap-2">
                <button data-view="dashboard" class="nav-button active text-sm md:text-base px-4 py-2 rounded-full bg-white hover:bg-[#e58968] hover:text-white">üöÄ In√≠cio</button>
                <button data-view="natureza" class="nav-button text-sm md:text-base px-4 py-2 rounded-full bg-white hover:bg-[#e58968] hover:text-white">üåø Natureza</button>
                <button data-view="humanas" class="nav-button text-sm md:text-base px-4 py-2 rounded-full bg-white hover:bg-[#e58968] hover:text-white">üåç Humanas</button>
                <button data-view="linguagens" class="nav-button text-sm md:text-base px-4 py-2 rounded-full bg-white hover:bg-[#e58968] hover:text-white">üìö Linguagens</button>
                <button data-view="matematica" class="nav-button text-sm md:text-base px-4 py-2 rounded-full bg-white hover:bg-[#e58968] hover:text-white">üî¢ Matem√°tica</button>
            </div>
        </nav>
    </header>

    <main id="content-area" class="container mx-auto p-4 md:p-8">
    </main>
    
    <footer class="text-center py-6 bg-white shadow-inner mt-8">
        <p class="text-gray-500">Desenvolvido para te ajudar a conquistar seus sonhos. Bons estudos!</p>
    </footer>

    <script>
        let studyPlanData = {
      natureza: {
        title: 'Ci√™ncias da Natureza', icon: 'üåø',
        subjects: {
          'Biologia': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLWkLxva8dPIv0yQ4Y0sJeceKfec7IK4OA',
            topics: [
              { name: 'Ecologia', url: 'https://www.youtube.com/watch?v=6Ug32AjUnzc', completed: false },
              { name: 'Gen√©tica e Mendel', url: 'https://www.youtube.com/playlist?list=PLQVUQftDIJQFW2c1dqjTOjzOKxCTs6We8', completed: false },
              { name: 'Citologia', url: 'https://www.youtube.com/playlist?list=PLnTvCZqHfhNXibsTx1VN65pwSR0-Vxsmk', completed: false },
              { name: 'Fisiologia Humana', url: 'https://www.youtube.com/watch?v=u9IMxDZ1KRI', completed: false },
              { name: 'Evolu√ß√£o', url: 'https://www.youtube.com/watch?v=Uodc0C4jFQs', completed: false },
              { name: 'Biotecnologia', url: 'https://www.youtube.com/watch?v=sSX5mmYi2n0', completed: false },
            ]
          },
          'F√≠sica': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLBhNirvSnz0zzI0j5jV0HEy-FquhwaWLA',
            topics: [
              { name: 'Mec√¢nica', url: 'https://www.youtube.com/watch?v=FB0AW1TN6xY', completed: false },
              { name: 'Eletrodin√¢mica', url: 'https://www.youtube.com/watch?v=_ciUA_P9CUc', completed: false },
              { name: 'Ondulat√≥ria', url: 'https://www.youtube.com/watch?v=tB92JsAkXoA', completed: false },
              { name: 'Termologia', url: 'https://www.youtube.com/watch?v=iyMabCwU7YI', completed: false },
              { name: '√ìptica Geom√©trica', url: 'https://www.youtube.com/watch?v=SCTsBlmVwdA', completed: false },
            ]
          },
          'Qu√≠mica': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLL5oEOCl6YVnaCSeXaUMBM1Ari9JAAxlU',
            topics: [
              { name: 'Qu√≠mica Geral', url: 'https://www.youtube.com/watch?v=s_lmv1jOJyI', completed: false },
              { name: 'F√≠sico‚ÄëQu√≠mica', url: 'https://www.youtube.com/watch?v=s_lmv1jOJyI', completed: false },
              { name: 'Qu√≠mica Org√¢nica', url: 'https://www.youtube.com/watch?v=SsHXv5DR7sQ', completed: false },
              { name: 'Eletroqu√≠mica', url: 'https://www.youtube.com/watch?v=N4qpddzUPhg', completed: false },
              { name: 'Qu√≠mica Ambiental', url: 'https://www.youtube.com/watch?v=SsHXv5DR7sQ', completed: false },
            ]
          }
        }
      },
      humanas: {
        title: 'Ci√™ncias Humanas', icon: 'üåç',
        subjects: {
          'Hist√≥ria': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLNMxGYUW37dPJrg40aWIu3kczpymtl3SH',
            topics: [
              { name: 'Brasil Col√¥nia', url: 'https://www.youtube.com/playlist?list=PLNMxGYUW37dPJrg40aWIu3kczpymtl3SH', completed: false },
              { name: 'Brasil Imp√©rio', url: 'https://www.youtube.com/watch?v=qtwz_HKqUUg', completed: false },
              { name: 'Rep√∫blica Velha', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Era Vargas', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Ditadura Militar', url: 'https://www.youtube.com/watch?v=TVqGseP1tB0', completed: false },
              { name: 'Idade M√©dia e Feudalismo', url: 'https://www.youtube.com/watch?v=TVqGseP1tB0', completed: false },
              { name: 'Revolu√ß√µes', url: 'https://www.youtube.com/watch?v=QoSWUeL3fW0', completed: false },
              { name: 'Guerras Mundiais / Guerra Fria', url: 'https://www.youtube.com/watch?v=QoSWUeL3fW0', completed: false },
            ]
          },
          'Geografia': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLMra4G0-Z7pPI6ZtEnVAHwzfIenbrrvcg',
            topics: [
              { name: 'Globaliza√ß√£o', url: 'https://www.youtube.com/watch?v=6UnhnhEnACE', completed: false },
              { name: 'Agr√°ria e Urbaniza√ß√£o', url: 'https://www.youtube.com/watch?v=6UnhnhEnACE', completed: false },
              { name: 'Clima, Relevo e Biomas', url: 'https://www.youtube.com/watch?v=6UnhnhEnACE', completed: false },
              { name: 'Geopol√≠tica Mundial', url: 'https://www.youtube.com/watch?v=6UnhnhEnACE', completed: false },
              { name: 'Fontes de Energia', url: 'https://www.youtube.com/watch?v=6UnhnhEnACE', completed: false },
              { name: 'Cartografia', url: 'https://www.youtube.com/watch?v=6UnhnhEnACE', completed: false },
            ]
          },
          'Filosofia': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLMra4G0-Z7pPPztK7F69zHzpzAtaHEnJ5',
            topics: [
              { name: 'Filosofia Antiga', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Filosofia Medieval', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Filosofia Moderna', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Filosofia Pol√≠tica', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Iluminismo', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Escola de Frankfurt', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
            ]
          },
          'Sociologia': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLMra4G0-Z7pPPztK7F69zHzpzAtaHEnJ5',
            topics: [
              { name: 'Cl√°ssicos', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Ind√∫stria Cultural', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Mundo do Trabalho', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Cidadania e Movimentos', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Estratifica√ß√£o Social', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
            ]
          }
        }
      },
      linguagens: {
        title: 'Linguagens, C√≥digos e suas Tecnologias', icon: 'üìö',
        subjects: {
          'Portugu√™s': {
            playlist_url: 'https://www.youtube.com/c/redacaoegramatica/playlists',
            topics: [
              { name: 'Interpreta√ß√£o de Texto', url: 'https://www.youtube.com/watch?v=W3XrpIRTgzA', completed: false },
              { name: 'Fun√ß√µes da Linguagem', url: 'https://www.youtube.com/watch?v=eN9nxNpAdhI', completed: false },
              { name: 'Varia√ß√£o Lingu√≠stica', url: 'https://www.youtube.com/watch?v=W3XrpIRTgzA', completed: false },
              { name: 'Figuras de Linguagem', url: 'https://www.youtube.com/watch?v=eN9nxNpAdhI', completed: false },
              { name: 'Coes√£o e Coer√™ncia', url: 'https://www.youtube.com/watch?v=W3XrpIRTgzA', completed: false },
              { name: 'Tipos Textuais', url: 'https://www.youtube.com/watch?v=W3XrpIRTgzA', completed: false },
            ]
          },
          'Literatura': {
            playlist_url: 'https://www.youtube.com/playlist?list=PLMra4G0-Z7pPPztK7F69zHzpzAtaHEnJ5',
            topics: [
              { name: 'Modernismo', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Romantismo & Realismo', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Parnasianismo', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Pr√©-Modernismo', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Modernismo 1¬™‚Äì3¬™ fases', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
              { name: 'Tend√™ncias Contempor√¢neas', url: 'https://www.youtube.com/watch?v=qP2_rHjv4xo', completed: false },
            ]
          },
          'Reda√ß√£o': {
            playlist_url: 'https://www.youtube.com/watch?v=ffyFacPiQck',
            topics: [
              { name: 'Estrutura da Reda√ß√£o', url: 'https://www.youtube.com/watch?v=ffyFacPiQck', completed: false },
              { name: 'Compet√™ncia 1', url: 'https://www.youtube.com/watch?v=s6L2a1X_9a4', completed: false },
              { name: 'Compet√™ncia 2', url: 'https://www.youtube.com/watch?v=s6L2a1X_9a4', completed: false },
              { name: 'Compet√™ncia 3', url: 'https://www.youtube.com/watch?v=s6L2a1X_9a4', completed: false },
              { name: 'Compet√™ncia 4', url: 'https://www.youtube.com/watch?v=s6L2a1X_9a4', completed: false },
              { name: 'Compet√™ncia 5', url: 'https://www.youtube.com/watch?v=s6L2a1X_9a4', completed: false },
            ]
          }
        }
      },
      matematica: {
        title: 'Matem√°tica e suas Tecnologias', icon: 'üî¢',
        subjects: {
          'Matem√°tica': {
            playlist_url: 'https://www.youtube.com/playlist?list=PL83s8LGM84J6D4Lyv5fu2PYpodc-GUGkZ',
            topics: [
              { name: 'Matem√°tica B√°sica', url: 'https://www.youtube.com/watch?v=WWoyrI7ladY', completed: false },
              { name: 'Raz√£o & Propor√ß√£o', url: 'https://www.youtube.com/watch?v=WWoyrI7ladY', completed: false },
              { name: 'Porcentagem e Juros', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
              { name: 'Fun√ß√µes', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
              { name: 'An√°lise Combinat√≥ria', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
              { name: 'Probabilidade', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
              { name: 'Geometria Plana', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
              { name: 'Geometria Espacial', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
              { name: 'Estat√≠stica', url: 'https://www.youtube.com/watch?v=fEGFBJGHqXY', completed: false },
            ]
          }
        }
      }
    };

        const contentArea = document.getElementById('content-area');
        const mainNav = document.getElementById('main-nav');
        let currentView = 'dashboard';
        let previousView = 'dashboard';
        let currentArea = null;

        const weeklyPlan = [
            { day: 'Segunda', subjects: 'Matem√°tica e Qu√≠mica', color: 'bg-blue-100' },
            { day: 'Ter√ßa', subjects: 'Hist√≥ria e Biologia', color: 'bg-green-100' },
            { day: 'Quarta', subjects: 'Reda√ß√£o e F√≠sica', color: 'bg-yellow-100' },
            { day: 'Quinta', subjects: 'Geografia e Linguagens', color: 'bg-purple-100' },
            { day: 'Sexta', subjects: 'Filosofia/Sociologia e Revis√£o', color: 'bg-red-100' },
            { day: 'S√°bado', subjects: 'Simulados e Exerc√≠cios', color: 'bg-indigo-100' },
            { day: 'Domingo', subjects: 'Descanso e Corre√ß√£o', color: 'bg-gray-100' },
        ];
        
        function saveProgress() {
            localStorage.setItem('enemStudyProgress', JSON.stringify(studyPlanData));
        }

        function loadProgress() {
            const savedProgress = localStorage.getItem('enemStudyProgress');
            if (savedProgress) {
                studyPlanData = JSON.parse(savedProgress);
            }
        }

        function calculateProgress(areaKey, subjectKey) {
            const subject = studyPlanData[areaKey].subjects[subjectKey];
            const totalTopics = subject.topics.length;
            if (totalTopics === 0) return { completed: 0, total: 0, percentage: 0 };
            
            const completedTopics = subject.topics.filter(topic => topic.completed).length;
            const percentage = Math.round((completedTopics / totalTopics) * 100);
            return { completed: completedTopics, total: totalTopics, percentage: percentage };
        }

        function renderDashboard() {
            contentArea.innerHTML = `
                <section id="weekly-plan" class="mb-12">
                    <h2 class="text-2xl font-bold text-center mb-2">Seu Plano de Estudos Semanal</h2>
                    <p class="text-center text-gray-600 max-w-2xl mx-auto mb-6">Esta √© uma sugest√£o para organizar sua rotina. A consist√™ncia √© a chave para o sucesso! Sinta-se livre para adaptar ao seu ritmo.</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4">
                        ${weeklyPlan.map(item => `
                            <div class="p-4 rounded-lg text-center ${item.color} shadow">
                                <p class="font-bold text-gray-800">${item.day}</p>
                                <p class="text-sm text-gray-600">${item.subjects}</p>
                            </div>
                        `).join('')}
                    </div>
                </section>
                <section id="overview-chart" class="bg-white p-4 sm:p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-bold text-center mb-2">Vis√£o Geral dos Conte√∫dos</h2>
                    <p class="text-center text-gray-600 max-w-2xl mx-auto mb-6">Este gr√°fico mostra a quantidade de t√≥picos essenciais por mat√©ria para te ajudar a visualizar o volume de estudo em cada √°rea. Use-o para planejar seu tempo de forma estrat√©gica.</p>
                    <div class="chart-container">
                        <canvas id="topicsChart"></canvas>
                    </div>
                </section>
            `;
            renderChart();
        }

        function renderArea(areaKey) {
            const area = studyPlanData[areaKey];
            if (!area) return;
            
            contentArea.innerHTML = `
                <header class="text-center mb-8">
                    <h2 class="text-3xl font-bold">${area.icon} ${area.title}</h2>
                    <p class="text-gray-600 mt-2 max-w-2xl mx-auto">Explore as mat√©rias desta grande √°rea. Clique em uma mat√©ria para ver a lista de conte√∫dos, marcar seu progresso e acessar as aulas.</p>
                </header>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${Object.keys(area.subjects).map(subjectKey => {
                        const progress = calculateProgress(areaKey, subjectKey);
                        return `
                        <div class="card bg-white p-6 rounded-lg shadow-md cursor-pointer hover:bg-[#fff9f2]" data-subject="${subjectKey}" data-area="${areaKey}">
                            <h3 class="text-xl font-bold text-[#d37b58]">${subjectKey}</h3>
                            <div class="mt-4">
                                <div class="flex justify-between items-center text-sm text-gray-500 mb-1">
                                    <span>Progresso</span>
                                    <span>${progress.completed}/${progress.total}</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-bar-fill" style="width: ${progress.percentage}%;"></div>
                                </div>
                            </div>
                        </div>
                    `}).join('')}
                </div>
            `;

            document.querySelectorAll('.card[data-subject]').forEach(card => {
                card.addEventListener('click', (e) => {
                    const subjectKey = e.currentTarget.dataset.subject;
                    const areaKey = e.currentTarget.dataset.area;
                    previousView = currentView;
                    currentView = 'topics';
                    currentArea = areaKey;
                    renderTopics(areaKey, subjectKey);
                });
            });
        }
        
        function renderTopics(areaKey, subjectKey) {
            const subject = studyPlanData[areaKey].subjects[subjectKey];
            const area = studyPlanData[areaKey];
            if (!subject) return;

            contentArea.innerHTML = `
                <header class="mb-8">
                    <button id="back-button" class="flex items-center gap-2 mb-4 text-gray-600 hover:text-[#d37b58] font-semibold">
                        <span class="text-xl">‚Üê</span> Voltar para ${area.title}
                    </button>
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                        <div>
                            <h2 class="text-3xl font-bold">${area.icon} ${subjectKey}</h2>
                            <p class="text-gray-600 mt-2">Marque os conte√∫dos que j√° estudou e acesse as aulas.</p>
                        </div>
                        <a href="${subject.playlist_url}" target="_blank" rel="noopener noreferrer" class="mt-4 sm:mt-0 text-center text-white font-bold bg-[#d37b58] px-4 py-2 rounded-lg hover:bg-[#c16a4a] transition-colors shadow">
                            üìö Ver Playlist Completa
                        </a>
                    </div>
                </header>
                <div id="topics-list" class="space-y-3">
                    ${subject.topics.map((topic, index) => `
                        <div class="topic-item bg-white p-4 rounded-lg shadow-md flex items-center gap-4">
                            <input type="checkbox" id="topic-${areaKey}-${subjectKey}-${index}" data-area="${areaKey}" data-subject="${subjectKey}" data-topic-index="${index}" class="h-5 w-5 rounded border-gray-300 text-[#e58968] focus:ring-[#d37b58]" ${topic.completed ? 'checked' : ''}>
                            <label for="topic-${areaKey}-${subjectKey}-${index}" class="flex-1 font-semibold text-gray-700 cursor-pointer">${topic.name}</label>
                            <a href="${topic.url}" target="_blank" rel="noopener noreferrer" class="text-sm font-bold text-white bg-[#e58968] px-3 py-1 rounded-full hover:bg-[#d37b58] transition-colors">‚ñ∂Ô∏è Estudar Aula</a>
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('back-button').addEventListener('click', () => {
                currentView = previousView;
                currentArea = null;
                updateView();
            });

            document.getElementById('topics-list').addEventListener('change', (e) => {
                if (e.target.type === 'checkbox') {
                    const area = e.target.dataset.area;
                    const subject = e.target.dataset.subject;
                    const index = e.target.dataset.topicIndex;
                    studyPlanData[area].subjects[subject].topics[index].completed = e.target.checked;
                    saveProgress();
                }
            });
        }

        function renderChart() {
            const ctx = document.getElementById('topicsChart').getContext('2d');
            const subjects = [];
            const topicsCount = [];

            Object.values(studyPlanData).forEach(area => {
                Object.entries(area.subjects).forEach(([subjectName, subjectData]) => {
                    subjects.push(subjectName);
                    topicsCount.push(subjectData.topics.length);
                });
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: subjects,
                    datasets: [{
                        label: 'N¬∫ de T√≥picos Essenciais',
                        data: topicsCount,
                        backgroundColor: 'rgba(229, 137, 104, 0.6)',
                        borderColor: 'rgba(211, 123, 88, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#4a4a4a',
                            titleFont: {
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 14
                            },
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function updateView() {
            mainNav.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === currentView);
            });
            
            if(currentView === 'dashboard') {
                renderDashboard();
            } else if (studyPlanData[currentView]) {
                 renderArea(currentView);
            }
        }
        
        mainNav.addEventListener('click', (e) => {
            if (e.target.matches('.nav-button')) {
                const view = e.target.dataset.view;
                if(view !== currentView || currentArea !== null) {
                    currentView = view;
                    currentArea = null;
                    updateView();
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            renderDashboard();
        });
    </script>
</body>
</html>
